# üîÑ Integration App (CMS ‚Üí Report System)

Spring Boot-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —É—á–µ–±–Ω–æ–π CMS –∏ –ø—Ä–æ–≤–µ—Ä—è—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π.  
–†–µ–∞–ª–∏–∑—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–ø–∞—Å–Ω—ã—Ö —á–∞—Å—Ç—è—Ö (spare parts), –∏—Ö —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ CSV-–æ—Ç—á—ë—Ç–∞ –≤ —Ç—Ä–µ–±—É–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
|------------|--------------|
| –Ø–∑—ã–∫ | Java 21 |
| Framework | Spring Boot 3 + Apache Camel |
| ORM | Spring Data JPA / Hibernate |
| –ú–∏–≥—Ä–∞—Ü–∏–∏ | Liquibase (SQL-—Å–∫—Ä–∏–ø—Ç—ã) |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | PostgreSQL |
| –ö–ª–∏–µ–Ω—Ç—ã | WebClient (CMS + Report API) |
| –§–æ—Ä–º–∞—Ç –æ–±–º–µ–Ω–∞ | JSON (CMS), CSV (Report) |
| Build Tool | Maven |

---

## üåê REST-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | URL                                                | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                      |
|-------|----------------------------------------------------|-------------------------------------------------|
| POST  | `/integration/run-sync`                            | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö CMS ‚Üí –ë–î         |
| POST  | `/integration/upload-report?onlyActive=true`       | –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å CSV-–æ—Ç—á—ë—Ç              |
| GET   | `/integration/preview-csv?onlyActive=true`         | –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä CSV –ø–µ—Ä–µ–¥ –≤—ã–≥—Ä—É–∑–∫–æ–π                |
| GET   | `/integration/results`                             | –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ CSV                 |

---

## üìä –¢–∞–±–ª–∏—Ü—ã

| –¢–∞–±–ª–∏—Ü–∞                | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                              |
|------------------------|-----------------------------------------|
| `spare_parts`          | –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π               |
| `spare_part_versions`  | –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–∞–∂–¥–æ–π –¥–µ—Ç–∞–ª–∏         |
| `sync_run`             | –ñ—É—Ä–Ω–∞–ª –∑–∞–ø—É—Å–∫–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏           |

---

## üîÅ –ü—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

1. **REST-–∑–∞–ø—Ä–æ—Å**:  
   `POST /integration/run-sync` ‚Üí –º–∞—Ä—à—Ä—É—Ç `direct:sync-cms`

2. **SyncService** –≤—ã–∑—ã–≤–∞–µ—Ç **CmsClient** ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ CMS –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ.

3. **UpsertService** –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–ª–∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü—É `spare_parts`.

4. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `spare_part_versions`.

5. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `sync_run`.

---

## üßæ –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞

1. **REST-–∑–∞–ø—Ä–æ—Å**:  
   `POST /integration/upload-report` ‚Üí –º–∞—Ä—à—Ä—É—Ç `direct:upload-report`

2. **CsvService** —Å–æ–±–∏—Ä–∞–µ—Ç CSV.

3. **ReportClient** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç CSV –≤ —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–≤–µ—Ä–∫–∏.

4. –†–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑:  
   `GET /integration/results`

---

## –ü—Ä–∏–º–µ—Ä CSV-—Å—Ç—Ä–æ–∫–∏

```csv
SPARE-1;Spare Part 1;Description for spare part 1;CLUTCH;DAMAGED;11;46;2025-10-07T15:25:34.861286586
```
## –§–æ—Ä–º–∞—Ç CSV-—Å—Ç—Ä–æ–∫–∏
```csv
spareCode;spareName;spareDescription;spareType;spareStatus;price;quantity;updatedAt
```
